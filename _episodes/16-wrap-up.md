---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 16-wrap-up.md in _episodes_rmd/
title: Writing Good Software
teaching: 15
exercises: 0
questions:
- "How can I write software that other people can use?"
objectives:
- "Describe best practices for writing R and explain the justification for each."
keypoints:
- "Keep your project folder structured, organized and tidy."
- "Document what and why, not how."
- "Break programs into short single-purpose functions."
- "Write re-runnable tests."
- "Don't repeat yourself."
- "Don't repeat yourself."
- "Be consistent in naming, indentation, and other aspects of style."
source: Rmd
---

## プロジェクトフォルダーを構造化する

プロジェクトフォルダーを、コードファイル、マニュアル、データ、バイナリー、プロットの出力などのサブフォルダーを作ることで、構造化し、整理し、片づいた形にしておきましょう。全部、手作業でできますが、RStudioの `New Project` 機能、または、`ProjectTemplate` のように、その目的で作られたパッケージの助けを借りることもできます。

> ## ヒント：ProjectTemplateという使える解決策
>
> プロジェクトの管理を自動化する方法のひとつは、第三者パッケージである `ProjectTemplate` をインストールする方法です。
> このパッケージは、プロジェクト管理に理想的なディレクトリ構造を作成します。
> 自分の分析パイプライン（またはワークフロー）が整理、構造化されるので、これはとても役に立ちます。
> RStudioのデフォルトプロジェクト機能とGitでも、自分の作業の履歴を保存し、他の共同作業者と作ったものをシェアできます。
>
> 1. `ProjectTemplate` をダウンロードする
> 2. ライブラリを読み込む
> 3. プロジェクトを開始する：
>
> 
> ```r
> install.packages("ProjectTemplate")
> library("ProjectTemplate")
> create.project("../my_project", merge.strategy = "allow.non.conflict")
> ```
>
> ProjectTemplate及びその機能についてのについての更なる情報は、
> 次のホームページから入手可能です [ProjectTemplate](http://projecttemplate.net/index.html)
{: .callout}


## コードを読めるようにする

コードを書く際に一番重要なのが、それが読めて理解できるようにすることです。
他の誰が自分のコードを取り上げ、何をするものか理解してほしいと思うでしょう。
多くの場合、この誰かさんは、6か月後の自分で、もしコードが読めない、
理解できない場合は、昔の自分に悪態をつくことになるでしょう。

## 文書化：何、なぜ、どのようにを伝えて下さい

初めて始めたばかりのころは、コメントには、そのコマンドが何をするかを記したものが多いです。
なぜならば、学び始めたばかりで、概念をはっきりさせるのに役立ち、後で思い出せるからです。
しかしながら、後々、それらのコメントは、コードがどんな問題を解決しようとしていたのかを思い出そうと
する際、そんなに役に立ちません。 自分は*何* の問題を、 *なぜ* 解こうとしているのかも、コメントに含めるようにしましょう。
*どのように* については、その後の話です。導入の詳細は、理想的にはそこまで心配する必要はありません。

## コードをモジュール化しましょう

おすすめは、関数を分析スクリプトと分けておｋ、別のファイルに保存しておき、
プロジェクトでRのセッションを開いたときに、 `source` することです。
このアプローチを取ると、分析スクリプトがちらからず、プロジェクトにある、どの分析スクリプトでも
使える関数の貯蔵庫ができるので、良いと思います。
また、同じような関数をまとめるが簡単になります。

## 問題をひとくち大に分ける

初めて始めたときは、問題解決と関数の記述は、気が滅入るタスクで、
コードの経験不足から分けることができないと思うかもしれません。問題を消化できる塊に分け、
導入の詳細についての心配は、後回しにしましょう：
問題を、解決方法をコード化できるまで、どんどん小さい関数に分けていきしましょう。
そして、そこからまた積み上げるのです。

## コードが正しいことをしていること知りましょう

関数をテストすることを、くれぐれも忘れないように。

## 同じことを繰り返さないようにしましょう！

関数は、プロジェクトの中で簡単に再利用できます。もし、プロジェクトで、同じようなコードの行の塊を
見つけたら、大抵、それが関数に移す候補たちです。

もし、計算が、一連の関数で行われていた場合、プロジェクトは、よりモジュール化され、変更するのが簡単になります。
これは、特定のインプットが必ず特定のアウトプットを返す場合に特にあてはまります。

## 常にスタイリッシュであろうとする

自分のコードに一貫性のあるスタイルを適用しましょう。

